# Rime schema settings
# encoding: utf-8

schema:
  schema_id: xklb42
  name: æ˜Ÿç©ºä¸¤ç¬”42é¡¶
  version: "6"
  author:
    - å‘æ˜Žäºº å¤§ç‰›
  dependencies:
    - xklb42_ci
menu:
  page_size: 6
  alternative_select_keys: "123789"
  alternative_select_labels: [1,2,3,7,8,9,1,4,5,6,0]

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    reset: 0
  - name: simplification
    reset: 0
  - name: extended_charset
    reset: 0
  - name: ascii_punct
    reset: 0

  - options: [_key_a]
    states: [é€ è¯]
  - options: [_key_e]
    states: [åæŸ¥]
  - options: [_key_`]
    states: [ä¸‡èƒ½]
  - options: [_key_u]
    states: [äºŒåˆ†]

  - name: _hide_candidate
    reset: 0
  - name: _hide_comment
    reset: 0
  - name: _hide_key_hint
    reset: 0

  - name: emoji_cn   #Emojiå¼€å…³
    reset: 0              # 1ä¸ºé»˜è®¤å¼€å¯
    states: [ "ðŸˆšï¸ï¸\uFE0E", "ðŸˆ¶ï¸ï¸\uFE0F" ]


engine:
  processors:
    - ascii_composer
    - recognizer
#    - lua_processor@cixuan
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@xklb42_zc
#    - affix_segmentor@xmfc
    - affix_segmentor@pinyin_simp
    - abc_segmentor
    - affix_segmentor@xklb42_ci
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator
    - "lua_translator@date_translator"
    - "lua_translator@shijian"
    - "lua_translator@shijian2"
    - "lua_translator@shuzi"
    - "lua_translator@jisuanqi"
    - reverse_lookup_translator
    - table_translator@xklb42_dict
    - table_translator@quanpinerfen
    - table_translator@xklb42_zc
    - table_translator@xklb42
    - table_translator@xklb42_user
    - table_translator@xklb42_ci
    - history_translator@history
    - script_translator@pinyin_simp
#    - table_translator@xmfc
  filters:
    - simplifier
    - simplifier@simplification
    - simplifier@emoji_cn   #Emojiæ»¤é•œ
    - reverse_lookup_filter@quanpinerfen_lookup
    - reverse_lookup_filter@pinyin_simp_lookup
#    - reverse_lookup_filter@xmfc_lookup
    - "lua_filter@qinghouxuan"
    - uniquifier


speller:
  alphabet: "@/;abcdefghijklmnopqrstuvwxyz1"
  initials: "@;abcdefghijklmnopqrstuvwxyz"
#  finals: '/'
  delimiter: " '"
  auto_select: true #é¡¶å­—ä¸Šå±
  auto_select_unique_candidate: true
  auto_clear: max_length #manual|auto|max_length ç©ºç æŒ‰ä¸‹ä¸€é”®ç¡®è®¤æ¸…å±|ç©ºç è‡ªåŠ¨æ¸…|è¾¾åˆ°æœ€é•¿ç æ—¶åŽç é¡¶ä¸Šæ¸…å±
  algebra:
    - xform/([A-Z][0-9]?)+([A-Z][0-9]?)$/$2/

    - derive/.....A|....B|...C|..D|.E|F//

    - derive|2$|;|
    - derive/[0-9;]$//

    - xform/F//
    - xform/E//
    - xform/D//
    - xform/C//
    - xform/B//
    - xform/A//


    - xlit|ï¼‘ï¼’ï¼“ï¼”ï¼•ï¼–ï¼—ï¼˜ï¼™ï¼|1234567890|
    - xlit|ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼º|ABCDEFGHIJKLMNOPQRSTUVWXYZ|
    - derive|^;|/|  #å¼•å¯¼é€ è¯æ—¶å¯ä»¥ç”¨/æ›¿ä»£;å¼•å¯¼ç¬¦å·


translator:
  __include: /TS1
  dictionary: xklb42
  initial_quality: 100
  enable_charset_filter: false
  enable_completion: false #é€ç æç¤º
  enable_encoder: false
  enable_sentence: false
  enable_user_dict: true
  encode_commit_history: true

simplification:
  opencc_config: s2t.json
  option_name: simplification
#  show_in_comment: true #å¼€å¯ç¼–ç æ»¤é•œ
  tips: all #ç®€ç¹å¯¹ç…§


history:
   input: ;
   size: 4 #é‡å¤å‰å‡ æ¬¡ä¸Šå±
   initial_quality: 100


#æ»¤é•œé…ç½®
emoji_cn:
  opencc_config: emoji.json   #é…ç½®æ–‡ä»¶
  option_name: emoji_cn    #ä¸ŽçŠ¶æ€æ å¼€å…³çš„åç§°ä¸€è‡´
  tips: all    #å¼€å¯æ³¨é‡Š

#æç¤ºé…ç½®
TS1:
  comment_format:
    - xform/([A-Z][0-9]?)+([A-Z][0-9]?)$/$2/
    - xform/.....U|.(.)...V|...W|..X|.Y|Z|.....A|....B|...C|..D|.E|F/$1/
    - xform/([ABCDEF][0-9]?)$//
    - xform/([UVWXYZ][0-9]?)$//
    - xform|1||
    - xform|~||
TS2:
  comment_format:
    - xform/([A-Z][0-9]?)+([A-Z][0-9]?)$/$2/
    - xform/.....U|.(.)...V|...W|..X|.Y|Z|.....A|....B|...C|..D|.E|F/$1/
    - xform|1|_|
    - xform/^/ã€”/
    - xform/$/ã€•/
    - xform/ / /
TS3:
  comment_format:
    - xform/([A-Z][0-9]?)+([A-Z][0-9]?)$/$2/
    - xform/.....U|.(.)...V|...W|..X|.Y|Z|.....A|....B|...C|..D|.E|F/$1/
    - xform/([ABCDEF][0-9]?)$//
    - xform/([UVWXYZ][0-9]?)$//
    - xform|~||
#åæŸ¥é…ç½®
#â†“éŸ³ç åæŸ¥æ–¹æ¡ˆ
pinyin_simp_lookup:
  __include: /TS2
  tags: [pinyin_simp]
  dictionary: xklb42 #åæŸ¥å…¶ç 
  overwrite_comment: true
pinyin_simp:
  tag: pinyin_simp
  dictionary: pinyin_simp
  enable_sentence: true
  enable_completion: true
  enable_user_dict: false
  prefix: "e"
  tips: "ã€”å…¨æ‹¼ã€•"


#â†“å½¢ç åæŸ¥æ–¹æ¡ˆ
xmfc_lookup:
  __include: /TS2
  tags: [xmfc]
  dictionary: xklb42 #åæŸ¥å…¶ç 
  overwrite_comment: true
xmfc:
  tag: xmfc
  dictionary: xmfc
  enable_sentence: true
  enable_completion: true
  enable_user_dict: false
  prefix: "#"
  tips: "ã€”æç¤ºã€•"

xklb42_ci:
  dictionary: xklb42_ci
  user_dict: xklb42_user
# â†“ ç”¨æˆ·è¯å…¸æ ¼å¼ï¼Œtabledbï¼ˆæ–‡æœ¬ï¼‰ æˆ– userdb ï¼ˆäºŒè¿›åˆ¶ï¼‰ã€‚
  db_class: tabledb
#  db_class: userdb
  enable_charset_filter: false
  enable_completion: false
  enable_encoder: false
  enable_sentence: false
  enable_user_dict: true
  encode_commit_history: false
  initial_quality: -9999 #ç”¨æˆ·è¯å’Œç³»ç»Ÿè¯é‡ç å±…åŽ
  comment_format:
    - xform|~||

xklb42_dict:
  dictionary: ""
  user_dict: xklb42_dict
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: -9999 #ç”¨æˆ·è¯å’Œç³»ç»Ÿè¯é‡ç å±…åŽ
  comment_format:
    - xform|~||

#äºŒåˆ†åæŸ¥æ–¹æ¡ˆ
quanpinerfen_lookup:
  __include: /TS2
  tags: [quanpinerfen]
  dictionary: xklb #åæŸ¥å…¶ç 
  overwrite_comment: true
quanpinerfen:
  tag: quanpinerfen
  dictionary: ""
  user_dict: quanpinerfen
  db_class: userdb
  enable_sentence: false
  enable_completion: true
  comment_format:
    - xform|~||

reverse_lookup:
  __include: /TS2
  dictionary: xklb_fc

xklb42_zc:
  __include: /TS1
  tag: xklb42_zc
  dictionary: xklb42_ci
  user_dict: xklb42_user
# â†“ ç”¨æˆ·è¯å…¸æ ¼å¼ï¼Œtabledbï¼ˆæ–‡æœ¬ï¼‰ æˆ– userdb ï¼ˆäºŒè¿›åˆ¶ï¼‰ã€‚
  db_class: tabledb
#  db_class: userdb
  enable_charset_filter: false
  enable_completion: true
  enable_encoder: true
  enable_sentence: true
  enable_user_dict: true
  encode_commit_history: false
  preedit_format:
    - xform|1|_|
  prefix: "a"
  tips: "ã€”é€ è¯ã€•"

xklb42:
  __include: /TS1
  tag: xklb42
  dictionary: xklb42
  user_dict: xklb42_user
# â†“ ç”¨æˆ·è¯å…¸æ ¼å¼ï¼Œtabledbï¼ˆæ–‡æœ¬ï¼‰ æˆ– userdb ï¼ˆäºŒè¿›åˆ¶ï¼‰ã€‚
  db_class: tabledb
#  db_class: userdb
  enable_charset_filter: false
  enable_completion: false
  enable_encoder: false
  enable_sentence: true
  enable_user_dict: false
  encode_commit_history: false
#  initial_quality: -999999 #å¡«100åˆ™è‡ªé€ è¯é«˜äºŽç³»ç»Ÿè¯|å¡«99åˆ™è‡ªé€ è¯ä½ŽäºŽç³»ç»Ÿè¯

xklb42_user:
  __include: /TS3
  tag: xklb42_ci
  dictionary: ""
  user_dict: xklb42_user
  db_class: stabledb
  enable_sentence: false
  enable_completion: false #é€ç æç¤º
  initial_quality: -999 #å¡«100åˆ™è‡ªé€ è¯é«˜äºŽç³»ç»Ÿè¯|å¡«99åˆ™è‡ªé€ è¯ä½ŽäºŽç³»ç»Ÿè¯

punctuator:
  import_preset: default
  half_shape:
    '''' : [ 'â€˜', 'â€™' , '\', 'ï¹¨' ]
    ';' : ""

key_binder:
  import_preset: default
  bindings:
    - {accept: "Shift+space", send: space, when: composing}   #å°ç‹¼æ¯«è¾“å…¥æ³•ä¸­è¿›è¡Œå¼•å¯¼é€ è¯æ—¶çš„ä¸Šå±ç»„åˆé”®ï¼ˆShift+spaceï¼‰ï¼ŒåŒæ–‡è¾“å…¥æ³•åˆ™éœ€è¦ç‚¹å‡»å€™é€‰è¯ä¸Šå±
    - {accept: "space", send: 1, when: composing}   #å¼•å¯¼é€ è¯ä¸­ç©ºæ ¼ç­‰äºŽé¦–é€‰ï¼Œç©ºæ ¼å°±ä¸§å¤±äº†ä¸Šå±çš„åŠŸèƒ½ï¼ˆåœ¨å¼•å¯¼é€ è¯ä¸­ï¼‰
    - {accept: ";", send: ";", when: composing} #åˆ†å·æ¬¡é€‰


recognizer:
  import_preset: default
  patterns:
    xklb42_ci: "^[qwrtypsdfghjklzxcvbnm][a-z][qwrtypsdfghjklzxcvbnm][a-z]$"
    xklb42: "(?(DEFINE)(?'s'[qwrtypsdfghjklzxcvbnm]))(?(DEFINE)(?'x'[a-z]))(?(DEFINE)(?'b'[aeiou]))^((?P>s)(?P>x)(?P>b){1,4}|^(?P>s)(?P>x)|^(?P>s)|(?P>s)(?P>x)(?P>s)((?P>x))?)$"
    reverse_lookup: "[a-z`]*`+[a-z`]*"
    xklb42_zc: "^a[a-z][a-z0-9)(,./:;?!']*'?$"
    pinyin_simp: "^e[a-z']*'?$"
#    xmfc: "^#[a-z']*'?$"
    xklb42_dict: "^oo[a-z]*?$"
    quanpinerfen: "^u[a-z]+?$"
    jsq: "^=[^a-z@]*?$"
    ybdb: "^;$"
    aeiou: "^[oi]([a-z]+)[a-z]?$"

